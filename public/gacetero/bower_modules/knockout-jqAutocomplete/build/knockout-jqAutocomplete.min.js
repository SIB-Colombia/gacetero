// knockout-jqAutocomplete 0.2.1 | (c) 2013 Ryan Niemeyer |  http://www.opensource.org/licenses/mit-license
!function(a){"function"==typeof define&&define.amd?define(["knockout","jquery","jquery.ui"],a):a(window.ko,jQuery)}(function(a,b){var c=function(){var c=this,d=a.utils.unwrapObservable;this.init=function(e,f,g,h,i){var j=d(f()),k={},l="function"==typeof j.filter?j.filter:c.defaultFilter;a.utils.extend(k,c.options),a.utils.extend(k,j.options),k.source="function"!=typeof j.source||a.isObservable(j.source)?c.processOptions.bind(c,f,l,j.source):function(a,b){var d=function(d){c.processOptions(f,null,d,a,b)};j.source.call(i.$data,a.term,d)},k.select=function(b,c){c.item&&c.item.actual&&(j.value(c.item.actual),a.isWriteableObservable(j.dataValue)&&j.dataValue(c.item.data))},k.change=function(b,c){c.item&&c.item.actual||(j.value(b.target&&b.target.value),a.isWriteableObservable(j.dataValue)&&j.dataValue(null))};var m=b(e).autocomplete(k).data("ui-autocomplete");j.template&&(m._renderItem=c.renderItem.bind(c,j.template,i)),a.utils.domNodeDisposal.addDisposeCallback(e,function(){m&&"function"==typeof m.destroy&&(m.destroy(),m=null)})},this.update=function(a,b){var c=d(b()),e=d(c&&c.value);a.value=e},this.defaultFilter=function(b,c){return c=c&&c.toLowerCase(),(b||0===b)&&a.toJSON(b).toLowerCase().indexOf(c)>-1},this.processOptions=function(a,b,c,e,f){var g,h,i,j=d(c)||[],k=[],l=this.getPropertyNames(a);for(h=0,i=j.length;i>h;h++)g=j[h],(!b||b(g,e.term))&&k.push({label:l.label?g[l.label]:g.toString(),value:l.input?g[l.input]:g.toString(),actual:l.value?g[l.value]:g,data:g});f(k)},this.renderItem=function(c,d,e,f){var g=b("<li></li>").appendTo(e),h=d.createChildContext(f.data);return a.applyBindingsToNode(g[0],{template:c},h),g.one("remove",a.cleanNode.bind(a,g[0])),g},this.getPropertyNames=function(b){var c=a.toJS(b());return{label:c.labelProp||c.valueProp,input:c.inputProp||c.labelProp||c.valueProp,value:c.valueProp}},this.options={autoFocus:!0,delay:50}};a.bindingHandlers.jqAuto=new c});